module buffer_reg(
    input clk,
    input load,        // 装载使能信号
    input [7:0] d,     // 数据输入
    output reg [7:0] q // 数据输出
);
    initial q = 8'h00;

    // 关键时序设计：
    // 模型机内核（PC、IR、RegGroup）使用的是 negedge clk（下降沿）
    // 为了让缓冲寄存器在“中间”时刻捕获数据，我们建议这里使用 posedge clk（上升沿）
    // 这样形成了：下降沿改变地址/选择寄存器 -> 上升沿锁存到缓冲器 -> 下降沿写入结果
    always @(posedge clk) begin
        if (load) q <= d;
    end
endmodule